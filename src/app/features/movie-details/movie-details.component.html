<div class="movie-details-dialog">
  <div class="flex justify-between items-center mb-1 w-full">
    <h2 mat-dialog-title>Movie Details</h2>
    <button mat-icon-button (click)="close()" aria-label="Close dialog" class="mr-3">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <mat-dialog-content>
    @if (isLoading()) {
      <div class="flex justify-center items-center py-8">
        <mat-spinner diameter="40"></mat-spinner>
      </div>
    } @else if (error()) {
      <div class="flex flex-col justify-center items-center py-8">
        <mat-icon class="text-6xl text-red-500 mb-4">error</mat-icon>
        <p class="text-lg">{{ error() }}</p>
      </div>
    } @else if (movieDetails(); as movie) {
      <div class="flex flex-col gap-6">
        <div class="flex flex-col md:flex-row gap-6">
          @if (movie.poster_path) {
            <img
              [src]="tmdbImageUrl + movie.poster_path"
              [alt]="movie.title + ' poster'"
              class="w-full md:w-64 h-auto rounded-lg object-cover"
            />
            <span class="text-sm text-gray-400 italic">{{tmdbImageUrl + movie.poster_path}}</span>
          }
          
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t">
          <div>
            <p class="text-sm text-gray-400 mb-1">Budget</p>
            <p class="font-semibold">
              {{ movie.budget > 0 ? '$' + (movie.budget | number: '1.0-0') : 'N/A' }}
            </p>
          </div>
          <div>
            <p class="text-sm text-gray-400 mb-1">Revenue</p>
            <p class="font-semibold">
              {{ movie.revenue > 0 ? '$' + (movie.revenue | number: '1.0-0') : 'N/A' }}
            </p>
          </div>
          <div>
            <p class="text-sm text-gray-400 mb-1">Languages</p>
            <p class="font-semibold">{{ languages() }}</p>
          </div>
          <div>
            <p class="text-sm text-gray-400 mb-1">Release Date</p>
            <p class="font-semibold">{{ movie.release_date | date: 'mediumDate' }}</p>
          </div>
        </div>
      </div>
    }
  </mat-dialog-content>
</div>
