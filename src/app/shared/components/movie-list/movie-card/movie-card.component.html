<mat-card class="w-full relative" [matTooltip]="movie().title">
  <mat-card-header class="w-full flex items-center justify-between gap-2">
    <mat-card-title
      class="flex-1 cursor-pointer"
      (click)="onTitleClick()"
      (keydown)="onTitleKeydown($event)"
      tabindex="0"
      role="button"
      [attr.aria-label]="'View details for ' + movie().title"
    >
      {{ movie().title.length > 22 ? movie().title.slice(0, 22) + '...' : movie().title }}
    </mat-card-title>
    <div
      class="flex-shrink-0"
      (click)="$event.stopPropagation()"
      (keydown)="$event.stopPropagation()"
      tabindex="-1"
    >
      <mat-checkbox
        [checked]="isSelected()"
        (change)="onCheckboxClick()"
        [attr.aria-label]="'Select ' + movie().title"
      ></mat-checkbox>
    </div>
  </mat-card-header>
  <div
    class="cursor-pointer"
    (click)="onContentClick()"
    (keydown)="onContentKeydown($event)"
    tabindex="0"
    role="button"
    [attr.aria-label]="'View details for ' + movie().title"
  >
    @if (movie().poster_path) {
      <img
        mat-card-image
        [src]="tmdbImageUrl + movie().poster_path"
        [alt]="movie().title + ' poster'"
        class="w-full h-64 object-cover"
      />
    } @else {
      <div
        class="h-64 flex items-center justify-center"
        style="background-color: var(--mat-sys-surface-variant)"
      >
        <mat-icon class="text-6xl" style="color: var(--mat-sys-on-surface-variant)"> movie </mat-icon>
      </div>
    }
    <mat-card-content>
      <div class="flex items-center gap-2 mt-4">
        <mat-icon>star</mat-icon>
        <span class="font-medium">{{ movie().vote_average.toFixed(1) }}/10</span>
      </div>
    </mat-card-content>
  </div>
</mat-card>
